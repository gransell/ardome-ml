# (C) Ardendo SE 2008
#
# Released under the LGPL

Import(['local_env'])

build = False

if local_env[ 'PLATFORM' ] != 'darwin':
	options = local_env.optional( 'openal' )
	build = options[ 'have_openal' ]
else:
	local_env.Append( CPPDEFINES = [ 'HAVE_OPENALFRAMEWORK' ] )
	local_env.Append( FRAMEWORKS = [ 'OpenAL' ] )
	local_env.Append( LINKFLAGS = [ '-framework', 'OpenAL' ] )
	build = True

if build:
	local_env.packages( 'boost_thread', 'boost_date_time', 'boost_system' )
	local_env[ 'win_target_path' ] = '$stage_ml_plugin'
	object = local_env.plugin( 'openmedialib_openal', [ 'openal_plugin.cpp' ] )
	local_env.copy_project_files( local_env[ 'stage_ml_plugin' ], object + [ 'openal_plugin.opl' ] )
